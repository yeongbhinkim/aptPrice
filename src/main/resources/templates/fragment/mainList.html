<!--
'*  파 일 명 : src\main\resources\templates\fragment\mainList.html
'*  기    능 : 메인 -> 메인 리스트
'*  작 성 자 : 김영빈
'*  비    고 : 2023.02.09 작성
  -->
<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Title</title>

</head>
<body>
<main th:fragment="mainList">
  <div class="shop-list-wrap">
    <div class="shop-list-box">
      <ul class="shops-box">

        <li class="shop-each" th:each="item : ${list}">
          <div class="shop-container">
            <div class="shop-container-util shop-each_img shop-img-rd ">
<!--              차트 OR 지도-->
              <canvas id="myChart"></canvas>
            </div>
            <div class="shop-container-util shop-each_title">
              <span>
                <a href="" th:href="@{/MyHomePrice/detail/{apt_id}(APT_ID=${item.apt_id})}"
                   th:text="${item.dan_gi_myeong}">아파트이름</a>
              </span>
            </div>
            <div class="shop-container-util shop-each_hashtag">
              <ul>
                <li class="shop-hashtag-rep rep1">
                  <div>
                    <span class="mainHashtag" th:text="${item.city}">위치</span>
                    <span class="mainHashtag" th:text="${item.square_meter}">전용면적(㎡)</span>
                  </div>
                </li>
                <br>
                <li class="shop-hashtag-rep rep2">
                  <div>
                    <span class="mainHashtag" th:text="${item.amount}">거래금액(만원)</span>
                    <span class="mainHashtag" th:text="${item.construction_date}">건축년도</span>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </li>
      </ul>

    </div>
  </div>
  <div class="coffeeShop-page page">
    <!--              이전페이지 정보-->
    <th:block th:if="${fc.prev}">
      <a class="coffeeShop-page-item" href=""
         th:href="@{/MyHomePrice/list/1/{contractDate}/{contractDateTo}/{searchSidoCd}/{searchGugunCd}/{searchDongCd}/{searchArea}/{searchAreaValue}/{searchAreaValueTo}/{searchFromAmount}/{searchToAmnount}
        (contractDate=${fc.contractDate},contractDateTo=${fc.contractDateTo},searchSidoCd=${fc.searchSidoCd},searchGugunCd=${fc.searchGugunCd},searchDongCd=${fc.searchDongCd},searchArea=${fc.searchArea}
        ,searchAreaValue=${fc.searchAreaValue},searchAreaValueTo=${fc.searchAreaValueTo},searchFromAmount=${fc.searchFromAmount},searchToAmnount=${fc.searchToAmnount})}">
        <i class="fas fa-angle-double-left"></i>
      </a>
      <a class="coffeeShop-page-item" href=""
         th:href="@{/MyHomePrice/list/{reqPage}/{contractDate}/{contractDateTo}/{searchSidoCd}/{searchGugunCd}/{searchDongCd}/{searchArea}/{searchAreaValue}/{searchAreaValueTo}/{searchFromAmount}/{searchToAmnount}
        (reqPage=${fc.startPage-1}, contractDate=${fc.contractDate},contractDateTo=${fc.contractDateTo},searchSidoCd=${fc.searchSidoCd},searchGugunCd=${fc.searchGugunCd},searchDongCd=${fc.searchDongCd},searchArea=${fc.searchArea}
        ,searchAreaValue=${fc.searchAreaValue},searchAreaValueTo=${fc.searchAreaValueTo},searchFromAmount=${fc.searchFromAmount},searchToAmnount=${fc.searchToAmnount})}">
        <i class="fas fa-angle-left"></i>
      </a>
    </th:block>
    <!--              페이지표시-->
    <th:block th:each="pnum : ${#numbers.sequence(fc.startPage,fc.endPage)}">
      <th:block th:if="${pnum != 0}">
        <a class="coffeeShop-page-item" th:classappend="${fc.rc.reqPage == pnum} ? 'active'" href="" th:href="@{/MyHomePrice/list/{reqPage}/{contractDate}/{contractDateTo}/{searchSidoCd}/{searchGugunCd}/{searchDongCd}/{searchArea}/{searchAreaValue}/{searchAreaValueTo}/{searchFromAmount}/{searchToAmnount}
        (reqPage=${pnum}, contractDate=${fc.contractDate},contractDateTo=${fc.contractDateTo},searchSidoCd=${fc.searchSidoCd},searchGugunCd=${fc.searchGugunCd},searchDongCd=${fc.searchDongCd},searchArea=${fc.searchArea}
        ,searchAreaValue=${fc.searchAreaValue},searchAreaValueTo=${fc.searchAreaValueTo},searchFromAmount=${fc.searchFromAmount},searchToAmnount=${fc.searchToAmnount})}"
           th:text="${pnum}">1</a>
      </th:block>
    </th:block>
    <!--                다음페이지정보-->
    <th:block th:if="${fc.next}">
      <a class="coffeeShop-page-item" href=""
         th:href="@{/MyHomePrice/list/{reqPage}/{contractDate}/{contractDateTo}/{searchSidoCd}/{searchGugunCd}/{searchDongCd}/{searchArea}/{searchAreaValue}/{searchAreaValueTo}/{searchFromAmount}/{searchToAmnount}
        (reqPage=${fc.endPage+1}, contractDate=${fc.contractDate},contractDateTo=${fc.contractDateTo},searchSidoCd=${fc.searchSidoCd},searchGugunCd=${fc.searchGugunCd},searchDongCd=${fc.searchDongCd},searchArea=${fc.searchArea}
        ,searchAreaValue=${fc.searchAreaValue},searchAreaValueTo=${fc.searchAreaValueTo},searchFromAmount=${fc.searchFromAmount},searchToAmnount=${fc.searchToAmnount})}">
        <i class="fas fa-angle-right"></i>
      </a>
      <a class="coffeeShop-page-item" href=""
         th:href="@{/MyHomePrice/list/{reqPage}/{contractDate}/{contractDateTo}/{searchSidoCd}/{searchGugunCd}/{searchDongCd}/{searchArea}/{searchAreaValue}/{searchAreaValueTo}/{searchFromAmount}/{searchToAmnount}
        (reqPage=${fc.finalEndPage}, contractDate=${fc.contractDate},contractDateTo=${fc.contractDateTo},searchSidoCd=${fc.searchSidoCd},searchGugunCd=${fc.searchGugunCd},searchDongCd=${fc.searchDongCd},searchArea=${fc.searchArea}
        ,searchAreaValue=${fc.searchAreaValue},searchAreaValueTo=${fc.searchAreaValueTo},searchFromAmount=${fc.searchFromAmount},searchToAmnount=${fc.searchToAmnount})}">
        <i class="fas fa-angle-double-right"></i>
      </a>
    </th:block>
  </div>
  </div>
  <script>
      // 대표 해시태그 정보 텍스트 앞에 # 붙이기
      const $mainHashtag = document.querySelectorAll('.mainHashtag');

      $mainHashtag.forEach(ele => {
          if (ele.textContent.trim().length > 1) {
              const $hashtagView = "#" + ele.textContent;
              ele.textContent = $hashtagView;
          }
      });
  </script>

  <script>
      var ctx = document.getElementById('myChart').getContext('2d');
      var myChart = new Chart(ctx, {
          type: 'line',
          data: {
              labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
              datasets: [{
                  label: 'Data Set 1',
                  data: [65, 59, 80, 81, 56, 55, 40],
                  backgroundColor: 'rgba(255, 99, 132, 0.2)',
                  borderColor: 'rgba(255, 99, 132, 1)',
                  borderWidth: 1
              },
                  {
                      label: 'Data Set 2',
                      data: [45, 79, 60, 71, 86, 25, 90],
                      backgroundColor: 'rgba(54, 162, 235, 0.2)',
                      borderColor: 'rgba(54, 162, 235, 1)',
                      borderWidth: 1
                  }]
          },
          options: {
              scales: {
                  yAxes: [{
                      ticks: {
                          beginAtZero: true
                      }
                  }]
              }
          }
      });
  </script>
</main>
</body>
</html>