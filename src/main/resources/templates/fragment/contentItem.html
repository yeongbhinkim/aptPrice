<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Title</title>
</head>
<body>
<main th:fragment="contentItem">

  <form action="" method="post" th:object="${myHomePriceListForm}">
    <input type="hidden" th:field="*{apt_id}" id="shopId">
    <!--    <input type="hidden" id="memberId" name="memberId" th:value="${s_id}">-->
    <!--    <input type="text" id="shopUrl" name="shopUrl" style="display: none;"-->
    <!--           th:value="|http://localhost:9080/coffeeShop/detail/*{shopId}|">-->
    <!-- container -->
    <!-- width : standard -->
    <div class="container">

      <!-- shop_info -->
      <div class="shop_info_wrap">

        <!-- shop_title_wrap -->
        <!-- 상호 로고 / 이름 -->
        <!--        <div class="shop_title_wrap">-->
        <!--          <div class="shop_logo">-->
        <!--            <img src="" alt="">-->
        <!--          </div>-->
        <!--          <div class="shop_title">-->
        <!--            <span>STARBUCKS</span>-->
        <!--            &lt;!&ndash; <img src="" alt=""> &ndash;&gt;-->
        <!--            &lt;!&ndash; 개별 로고 / 타이틀 사용시 이미지로 대체 &ndash;&gt;-->
        <!--          </div>-->
        <!--        </div>-->
        <!-- End of shop_title_wrap -->
        <!-- shop_info -->
        <div class="shop-info">

          <div class="shop-info_img">

            <div class="info-img-box">

              <div class="shop-container-util shop-each_imgshop-each_img shop-img-rd ">
                <canvas id="chart-canvas" width="330" height="300"></canvas>
              </div>
            </div>

            <br/>
          </div>


          <!-- shop-info_content-wrap -->
          <div class="shop-info-content-wrap">
            <div class="shop-info-content shop-title-sub-box">
              <div class="shop-title-sub">
                <h1 id="shopName" th:text="*{dan_gi_myeong}">단지명</h1>
                <!--                <th:block th:if="${s_id}? true : false">-->
                <!--                  <a href="javascript:void(0)" id="heartBtn" class="heart-btn 1"-->
                <!--                     style="background-image: url('/img/icon/icon-heart-red.png');"-->
                <!--                     th:if="${isBookmark}">등록취소</a>-->
                <!--                  <a href="javascript:void(0)" id="heartBtn" class="heart-btn 1"-->
                <!--                     style="background-image: url('/img/icon/icon-heart-empty-red.png');"-->
                <!--                     th:unless="${isBookmark}">등록</a>-->
                <!--                </th:block>-->
                <a href="javascript:void(0)" class="link-btn">현재 url 복사</a>
              </div>
            </div>
            <div class="shop-info-content shop-location-sub-box">
              <div class="shop-location-icon-box icon-box">
                <a href="#" class="location-icon"></a>
              </div>
              <div class="location-txt txt-box">
                <!--                <span id="shopAddress" th:text="*{city}">주소</span>-->
                <span id="shopAddress" th:text="*{road_name}">도로명</span>
              </div>
            </div>
            <div class="shop-info-content shop-call-sub-box">
              <div class="shop-call-icon-box icon-box">
                <a href="#" class="call-icon"></a>
              </div>
              <div class="call-txt txt-box">
                <span th:text="*{square_meter}">전용면적(㎡)</span>
              </div>
            </div>
            <div class="shop-info-content shop-hashtag-sub-box">
              <div class="shop-hashtag-icon-box icon-box">
                <img src="/img/icon/icon-hashtag.png" class="hashtag-icon">
              </div>
              <div class="hashtag-txt txt-box">
                <div>
                  <span class="mainHashtag" th:text="*{city}">#시군구</span>
                  <span class="mainHashtag" th:text="*{square_meter}">#전용면적(㎡)</span>
                </div>
                <br>
                <div>
                  <span class="mainHashtag" th:text="*{layer}">#층</span>
                  <span class="mainHashtag" th:text="*{construction_date}">#건축년도</span>
                </div>
              </div>
            </div>

            <div class="shop-info-content">
              <div class="shop-parking-icon-box icon-box">
                <img src="/img/icon/parking.png" class="allday-parking-icon">
              </div>
              <div class="parking-txt txt-box">
                <!--                <span th:text="*{parking}">주차</span>-->
              </div>
              <div class="shop-allday-icon-box icon-box">
                <img src="/img/icon/24-hours.png" class="allday-parking-icon">
              </div>
              <div class="allday-txt txt-box">
                <!--                <span th:text="*{allday}">24시간</span>-->
              </div>
            </div>

            <!--
            해시태그 전체보기 / 링크 복사
            -->
            <!--            전체 해시태그를 줄력하면 한 가게당 걸려있는 해시태그가 너무 많아서 페이지 화면 밸런스 깨짐.-무년- -->
            <!--            <div class="shop-info-content shop-hashtag-sub-box">-->
            <!--              <div class="shop-hashtag-icon-box icon-box">-->
            <!--                <a href="#" class="hashtag-all-icon"></a>-->
            <!--              </div>-->
            <!--              <div class="hashtag-txt txt-box">-->
            <!--                <span>#해시태그1</span>-->
            <!--                <span>#해시태그2</span>-->
            <!--                <span>#해시태그3</span>-->
            <!--                <span>#해시태그4</span>-->
            <!--              </div>-->
            <!--            </div>-->
          </div>
          <!-- End of shop-info_content-wrap -->
          <div class="map-box">

            <!-- 지도를 표시할 div 입니다 -->
            <div id="map" style="width: 100%; height: 100%;"></div>
            <p class="map_info">마커를 클릭하면 카카오맵으로 이동합니다.</p>

          </div>
        </div>

      </div>
      <!-- End of shop_info -->


      <div class="shop-list-wrap">
        <div class="shop-list-box">
          <ul class="shops-box">

            <li class="shop-each" th:each="item : ${list}">
              <div class="shop-container">
                <div class="shop-container-util shop-each_title">
              <span>
                  <span class="mainHashtag" th:text="${item.dan_gi_myeong}">아파트이름</span>
              </span>
                </div>
                <div class="shop-container-util shop-each_hashtag">
                  <ul>
                    <li class="shop-hashtag-rep rep1">
                      <div>
                        <span class="mainHashtag" th:text="${item.city}">위치</span>
                        <span class="mainHashtag" th:text="${item.square_meter}">전용면적(㎡)</span>
                      </div>
                    </li>
                    <br>
                    <li class="shop-hashtag-rep rep2">
                      <div>
                        <span class="mainHashtag" th:text="${item.amount}">거래금액(만원)</span>
                        <span class="mainHashtag" th:text="${item.construction_date}">건축년도</span>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </li>

          </ul>
        </div>
      </div>


    </div>
    </div>
    <!-- End of container -->
  </form>

  <script type="text/javascript"
          src="//dapi.kakao.com/v2/maps/sdk.js?appkey=7fba4b29e99f63689b2e4d190c478841&libraries=services"></script>
  <script>
      const $shopName = shopName.textContent;
      //road_name으로 변경
      const $shopAddress = shopAddress.textContent;
      var mapContainer = document.getElementById('map'), // 지도를 표시할 div
          mapOption = {
              center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
              level: 4 // 지도의 확대 레벨
          };

      // 지도를 생성합니다
      var map = new kakao.maps.Map(mapContainer, mapOption);

      // 주소-좌표 변환 객체를 생성합니다
      var geocoder = new kakao.maps.services.Geocoder();

      // 주소로 좌표를 검색합니다
      geocoder.addressSearch($shopAddress, function (result, status) {

          // 정상적으로 검색이 완료됐으면
          if (status === kakao.maps.services.Status.OK) {

              var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

              // 결과값으로 받은 위치를 마커로 표시합니다
              var marker = new kakao.maps.Marker({
                  map: map,
                  position: coords,
                  clickable: true
              });

              // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
              map.setCenter(coords);

              // 마커를 클릭하면 카카오맵으로 이동
              kakao.maps.event.addListener(marker, 'click', (evt) => {
                  window.open(`https://map.kakao.com/?q=${road_name}`)
              });
          }
      });

  </script>

<!--  <script th:inline="javascript">-->
<!--      /* Function to create the chart */-->

<!--      function createChart(item) {-->
<!--          const transactioncountlist = item.transactioncountlist;-->
<!--          const transactioncountlistArr = transactioncountlist.split(',');-->

<!--          const contract = item.contract;-->
<!--          const contractArr = contract.split(',');-->

<!--          /* Data for the chart */-->
<!--          var data = {-->
<!--              labels: contractArr,-->
<!--              datasets: [{-->
<!--                  label: '거래금액',-->
<!--                  data: transactioncountlistArr,-->
<!--                  backgroundColor: 'rgba(255, 99, 132, 0.2)',-->
<!--                  borderColor: 'rgba(255, 99, 132, 1)',-->
<!--                  borderWidth: 1-->
<!--              }]-->
<!--          };-->
<!--          console.log(data);-->
<!--          /* Options for the chart */-->
<!--          var options = {};-->

<!--          /* Get the canvas element */-->
<!--          var ctx = document.getElementById('chart-canvas').getContext('2d');-->

<!--          /* Create the chart */-->
<!--          new Chart(ctx, {-->
<!--              type: 'line',-->
<!--              data: data,-->
<!--              options: options-->
<!--          });-->
<!--      }-->

<!--      /* Loop through the chart data */-->
<!--      [[${list}]].forEach(function (item) {-->
<!--          createChart(item);-->
<!--      });-->
<!--  </script>-->
</main>
</body>
</html>
